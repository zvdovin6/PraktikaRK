<Page x:Class="Todo.View.TaskCreation"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:Todo"
       xmlns:xctk="http://schemas.xceed.com/wpf/xaml/toolkit"
        mc:Ignorable="d"
        Title="TaskCreation" Height="616" Width="835">
    <Page.Resources>
        <ResourceDictionary>
            <ResourceDictionary.MergedDictionaries>
                <ResourceDictionary Source="/ResourceDictionary/ResourcesTextBox.xaml"/>
                <ResourceDictionary Source="/ResourceDictionary/ResourcesButtons.xaml"/>
                <ResourceDictionary Source="/ResourceDictionary/ResourcesOtherStyles.xaml"/>
            </ResourceDictionary.MergedDictionaries>
        </ResourceDictionary>
    </Page.Resources>
    <Grid Background="#FFD9D9D9" Height="616" Width="835"  >
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="190*" />
            <ColumnDefinition />
        </Grid.ColumnDefinitions>
        <Button x:Name="Сreation_Button" Content="Создать" HorizontalAlignment="Left" VerticalAlignment="Top" Height="58" Width="327"  Margin="43,466,0,0"  Click="Сreation_Button_Click" Style="{StaticResource PrimaryButtonStyle}"/>
        <Button x:Name="Abolition_Button" Content="Отмена" HorizontalAlignment="Left" VerticalAlignment="Top" Height="58" Width="327"  Margin="418,464,0,0"  Click="Abolition_Button_Click" Style="{StaticResource SecondaryButtonStyle}"/>
        <TextBox x:Name="DescriptionTask" HorizontalAlignment="Left" Margin="29,302,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="342" Height="104" Style="{StaticResource TextBoxStyle}" />
        <TextBox x:Name="NameTask" HorizontalAlignment="Left" Margin="29,75,0,0" TextWrapping="Wrap" VerticalAlignment="Top" Width="342" Height="61"  Style="{StaticResource TextBoxStyle}" />
        <Label Content="Описание" HorizontalAlignment="Left" Margin="43,264,0,0" VerticalAlignment="Top" FontSize="18" Height="34" Width="92"/>
        <Label Content="Категория" HorizontalAlignment="Left" Margin="43,157,0,0" VerticalAlignment="Top" FontSize="18" Height="34" Width="94"/>
        <Label Content="Название" HorizontalAlignment="Left" Margin="43,40,0,0" VerticalAlignment="Top" FontSize="18" Height="34" Width="89"/>
        <ComboBox x:Name="CategoryComboBox" Width="342" Height="42" HorizontalAlignment="Left" VerticalAlignment="Top" Background="{StaticResource TextBoxBackgroundBrush}" BorderBrush="{x:Null}" ItemsSource="{Binding Categories}" SelectedItem="{Binding SelectedCategory, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}" IsEditable="False" Margin="29,193,0,0">
            <ComboBox.Style>
                <Style TargetType="ComboBox">
                    <Setter Property="Template">
                        <Setter.Value>
                            <ControlTemplate TargetType="ComboBox">
                                <Grid>
                                    <Border x:Name="Border"
                                      Style="{StaticResource CustomBorderStyle}"
                                      PreviewMouseDown="Border_MouseDown">
                                        <Grid>
                                            <ContentPresenter x:Name="ContentPresenter"
                                       Content="{TemplateBinding SelectionBoxItem}"
                                       HorizontalAlignment="Center"
                                       VerticalAlignment="Center"
                                       Margin="10,0,30,0"/>
                                            <ToggleButton x:Name="ToggleButton"
                                            IsChecked="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}, Mode=TwoWay}"
                                              Focusable="False"
                                            ClickMode="Press"
                                   Background="Transparent"
                                   BorderBrush="{x:Null}"
                                   FocusVisualStyle="{x:Null}" 
                                   OverridesDefaultStyle="True"
                                   HorizontalAlignment="Right"
                                   VerticalAlignment="Center"
                                   Width="25" Height="25">
                                                <ToggleButton.Template>
                                                    <ControlTemplate TargetType="ToggleButton">
                                                        <Grid Width="25" Height="25">
                                                            <Path Fill="Black" Data="M 0 0 L 4 4 L 8 0 Z" HorizontalAlignment="Center" VerticalAlignment="Center"/>
                                                        </Grid>
                                                    </ControlTemplate>
                                                </ToggleButton.Template>
                                            </ToggleButton>
                                        </Grid>
                                    </Border>
                                    <Popup x:Name="Popup"
                                    Placement="Bottom"
                                    PlacementTarget="{Binding RelativeSource={RelativeSource TemplatedParent}}"
                                   IsOpen="{Binding IsDropDownOpen, RelativeSource={RelativeSource TemplatedParent}}"
                                    AllowsTransparency="True"
                                     PopupAnimation="Slide">
                                        <Border Background="{StaticResource TextBoxBackgroundBrush}"
                                         CornerRadius="10"
                                         BorderBrush="Gray"
                                           BorderThickness="1"
                                           MinWidth="{Binding ActualWidth, RelativeSource={RelativeSource TemplatedParent}}">
                                            <ScrollViewer>
                                                <StackPanel IsItemsHost="True"/>
                                            </ScrollViewer>
                                        </Border>
                                    </Popup>
                                </Grid>
                            </ControlTemplate>
                        </Setter.Value>
                    </Setter>
                </Style>
            </ComboBox.Style>
        </ComboBox>
        <DatePicker x:Name="taskDataPicker" HorizontalAlignment="Left" Margin="433,62,0,0" VerticalAlignment="Top" Height="204" Width="300"  SelectedDate="{Binding TaskDate, Mode=TwoWay}" BorderBrush="{x:Null}" />
        <xctk:MaskedTextBox x:Name="TimeMaskedTextBox" Mask="00:00" HorizontalAlignment="Left" VerticalAlignment="Top" Margin="434,316,0,0" Width="302" Height="34" PromptChar="_" Text="{Binding TimeText, UpdateSourceTrigger=PropertyChanged}"  Style="{StaticResource CustomMaskedTextBoxStyle}" />
    </Grid>
</Page>
